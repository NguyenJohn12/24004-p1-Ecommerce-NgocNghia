<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ecomerce Webpage - Home</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <script type="module" src="./Statics/main.js"></script>
</head>

<body>
    <header class="site-header">
        <!-- logo -->
        <nav class="nav-container">
            <a href="" class="logo">J&N FIGURE STORE</a>
            <ul class="nav-links">
                <li><a href="./home.html">HOME</a></li>
                <li><a href="../AboutPage/about-page.html">ABOUT</a></li>
                <li><a href="../ShopPage/shop-page.html">SHOP</a></li>
                <li><a href="../ContactPage/contact-page.html">CONTACT</a></li>
                <li class="nav-icons">
                    <i onclick="goToCartPage()" class="fa-solid fa-bag-shopping cart-icon"></i>
                    <div class="account-dropdown">
                        <img id="profile-logo" class="profile-img"
                            src="https://www.svgrepo.com/show/343494/profile-user-account.svg" alt="account-logo"
                            srcset="" onclick="toggleDropdown()">
                        <!-- Menu drop down when click on profile -->
                        <div class="profile-menu" id="profile-dropdown">
                            <ul>
                                <li><a href="./home.html">HOME</a></li>
                                <li><a href="../AboutPage/about-page.html">ABOUT</a></li>
                                <li><a href="../ShopPage/shop-page.html">SHOP</a></li>
                                <li><a href="../ContactPage/contact-page.html">CONTACT</a></li>
                                <li><a href="../LoginPage/login-page.html" class="sign-in">SIGN IN</a></li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </nav>
        <div class="title-header">
            <h1>J&N</h1>
            <p>FIGURE STORE</p>
            <button class="btn-header"><a href="../ShopPage/shop-page.html">SHOP NOW</a></button>
        </div>
    </header>

    <!-- Search Bar Section -->
    <section class="search-container">
        <div class="search-wrapper">
            <input type="text" class="search-box" id="searchInput"
                placeholder="Search for figures (e.g., Pain, Naruto, Goku)...">
            <button class="search-btn" onclick="performSearch()">
                <i class="fa-solid fa-search"></i>
            </button>
        </div>
        <div class="search-results-info" id="searchInfo"></div>
    </section>

    <main>
        <section class="products-section">
            <div class="products-grid">
                <div class="product-card" data-product-id="117">
                    <img src="https://www.bbcw.com/var/images/product/500.500/AA137597.jpg" alt=""
                        class="product-image">
                    <div class="product-info">
                        <h3 class="product-name">Pain Figure</h3>
                        <p class="product-price">2.000.000đ</p>
                    </div>
                </div>

                <div class="product-card" data-product-id="118">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTebIl5QoOVAJvQZ6DY2UfvbVPQmiqA1EBnhA&s"
                        alt="" class="product-image">
                    <div class="product-info">
                        <h3 class="product-name">Naruto Modern Figure</h3>
                        <p class="product-price">5.000.000đ</p>
                    </div>
                </div>

                <div class="product-card" data-product-id="119">
                    <img src="https://daweebstop.com/cdn/shop/products/IMG_3927.jpg?v=1635865116&width=1445" alt=""
                        class="product-image">
                    <div class="product-info">
                        <h3 class="product-name">Black Goku Figure</h3>
                        <p class="product-price">8.000.000đ</p>
                    </div>
                </div>
            </div>
        </section>
        <hr>
        <section class="feedback-section">
            <h2 class="feedback-title">WHAT OUR CUSTOMERS SAY</h2>
            <div class="feedback-grid">
                <div class="feedback-card">
                    <i class="fa-solid fa-quote-left" style="color: #988643;"></i>
                    <p>Fast shipping and excellent customer service. The product was even better than expected. I will
                        definitely be a returning customer.</p>
                    <img src="" alt="">
                    <p class="name-customers"></p>
                </div>

                <div class="feedback-card">
                    <i class="fa-solid fa-quote-left" style="color: #988643;"></i>
                    <p>Fast shipping and excellent customer service. The product was even better than expected. I will
                        definitely be a returning customer.</p>
                    <img src="" alt="">
                    <p class="name-customers"></p>
                </div>

                <div class="feedback-card">
                    <i class="fa-solid fa-quote-left" style="color: #988643;"></i>
                    <p>Fast shipping and excellent customer service. The product was even better than expected. I will
                        definitely be a returning customer.</p>
                    <img src="" alt="">
                    <p class="name-customers"></p>
                </div>
            </div>
        </section>

        <section class="catalog-section">
            <h2 class="catalog-title">GIVE YOURSELF A FIGURE TO BECOME A COLLECTOR</h2>
            <p>TO PURSUE THE FIGURE COLLECTION DREAM</p>
            <button class="catalog-button"><a href="../ShopPage/shop-page.html">PURCHASE A FIGURE</a></button>
        </section>

        <section class="secure-product">
            <div class="secure-gird">
                <div class="secure-card">
                    <i class="fa-solid fa-key"></i>
                    <h3>SECURE PAYMENT</h3>
                    <p>All our payments our SSL secured</p>
                </div>

                <div class="secure-card">
                    <i class="fa-solid fa-truck"></i>
                    <h3>DELIVERED WITH CARE</h3>
                    <p>Super fast shipping to your door</p>
                </div>

                <div class="secure-card">
                    <i class="fa-solid fa-heart"></i>
                    <h3>EXCELLENT SERVICE</h3>
                    <p>Live chat and phone support</p>
                </div>
            </div>
        </section>

        <hr>
    </main>

    <footer class="footer-content">
        <ul class="nav-links">
            <li><a href="../home.html">HOME</a></li>
            <li><a href="../AboutPage/about-page.html">ABOUT</a></li>
            <li><a href="../ShopPage/shop-page.html">SHOP</a></li>
            <li><a href="../ContactPage/contact-page.html">CONTACT</a></li>
        </ul>
        <a href="" class="logo">J&N FIGURE STORE</a>
        <p>Copyright &copy; 2025 J&N Figure Store</p>
    </footer>

    <script>
        function getProductsFromStorage() {
            try {
                const products = localStorage.getItem('products');
                return products ? JSON.parse(products) : [];
            } catch (error) {
                console.error('Error reading products from localStorage:', error);
                return [];
            }
        }

        // Create product card HTML
        function createProductCard(product) {
            return `
        <div class="product-card" data-product-id="${product.id}" data-name="${product.name.toLowerCase()}">
            <img src="${product.image}" alt="${product.name}" class="product-image">
            <div class="product-info">
                <h3 class="product-name">${product.name}</h3>
                <p class="product-price">${product.price}</p>
            </div>
        </div>
    `;
        }

        // Render products to the grid
        function renderProducts(productsToShow = null) {
            const productsGrid = document.querySelector('.products-grid');
            const allProducts = getProductsFromStorage();
            const products = productsToShow || allProducts;

            if (products.length === 0) {
                productsGrid.innerHTML = '<p class="no-products">No products found.</p>';
                return;
            }

            productsGrid.innerHTML = products.map(product => createProductCard(product)).join('');

            // Re-attach click events to product cards
            attachProductCardEvents();
        }

        // Attach click events to product cards
        function attachProductCardEvents() {
            document.querySelectorAll('.product-card').forEach(card => {
                card.style.cursor = 'pointer';

                card.addEventListener('click', function () {
                    const productId = this.getAttribute('data-product-id');
                    localStorage.setItem('selectedProduct', productId);
                    window.location.href = `../ProductsPage/products-page.html`;
                });
            });
        }

        // Search functionality
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            filterProducts(searchTerm);
        }

        function filterProducts(searchTerm) {
            const allProducts = getProductsFromStorage();
            const searchInfo = document.getElementById('searchInfo');

            if (searchTerm === '') {
                // Show all products when search is empty
                renderProducts();
                searchInfo.textContent = '';
                return;
            }

            // Filter products based on search term
            const filteredProducts = allProducts.filter(product =>
                product.name.toLowerCase().includes(searchTerm) ||
                product.description.toLowerCase().includes(searchTerm) ||
                product.category.toLowerCase().includes(searchTerm)
            );

            // Render filtered products
            renderProducts(filteredProducts);

            // Update search info
            if (filteredProducts.length === 0) {
                searchInfo.textContent = `No results found for "${searchTerm}"`;
                searchInfo.style.color = '#ff6b6b';
            } else {
                searchInfo.textContent = `Found ${filteredProducts.length} product${filteredProducts.length !== 1 ? 's' : ''} for "${searchTerm}"`;
                searchInfo.style.color = '#28a745';
            }
        }

        // Real-time search as user types
        document.addEventListener('DOMContentLoaded', function () {
            // Initial render of all products
            renderProducts();

            const searchInput = document.getElementById('searchInput');

            // Real-time search
            searchInput.addEventListener('input', function () {
                const searchTerm = this.value.toLowerCase().trim();
                filterProducts(searchTerm);
            });

            // Search on Enter key press
            searchInput.addEventListener('keypress', function (e) {
                if (e.key === 'Enter') {
                    performSearch();
                }
            });

            // Clear search when input is focused and empty
            searchInput.addEventListener('focus', function () {
                if (this.value === '') {
                    filterProducts('');
                }
            });

            // Make sure other functions are available
            setTimeout(() => {
                updateProfileImage();
                updateProfileDropdown();
                updateCartBadge();
            }, 100);
        });

        // Keep existing functions
        function toggleDropdown() {
            const dropdown = document.getElementById('profile-dropdown');
            dropdown.classList.toggle('show');
        }

        function goToCartPage() {
            window.location.href = './CartPage/cart-page.html';
        }

        // Click outside to close dropdown
        document.addEventListener('click', function (event) {
            const dropdown = document.getElementById('profile-dropdown');
            const profileImg = document.querySelector('.profile-img');

            if (!dropdown.contains(event.target) && !profileImg.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });

        // Make functions available globally
        window.toggleDropdown = toggleDropdown;
        window.goToCartPage = goToCartPage;
        window.performSearch = performSearch;
    </script>
</body>

</html>